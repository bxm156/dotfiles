# IMPORTANT: See EXTERNAL.md for documentation on managing external dependencies
# This file defines external binaries, plugins, and tools managed by chezmoi.
# For adding new externals or troubleshooting, refer to EXTERNAL.md first.

# oh-my-zsh doesn't use version tags, using master branch (2025-11-03)
[".oh-my-zsh"]
    type = "archive"
    url = "https://github.com/ohmyzsh/ohmyzsh/archive/refs/heads/master.tar.gz"
    exact = true
    stripComponents = 1
    refreshPeriod = "168h"
[".oh-my-zsh/custom/plugins/zsh-vi-mode"]
    type = "archive"
    url = "https://github.com/jeffreytse/zsh-vi-mode/archive/refs/tags/v0.12.0.tar.gz"
    exact = true
    stripComponents = 1
    refreshPeriod = "168h"
[".oh-my-zsh/custom/plugins/zsh-autosuggestions"]
    type = "archive"
    url = "https://github.com/zsh-users/zsh-autosuggestions/archive/refs/tags/v0.7.1.tar.gz"
    exact = true
    stripComponents = 1
    refreshPeriod = "168h"
[".oh-my-zsh/custom/plugins/zsh-syntax-highlighting"]
    type = "archive"
    url = "https://github.com/zsh-users/zsh-syntax-highlighting/archive/refs/tags/0.8.0.tar.gz"
    exact = true
    stripComponents = 1
    refreshPeriod = "168h"

{{- $jqOS := .chezmoi.os }}
{{- if eq .chezmoi.os "darwin" }}
{{-   $jqOS = "macos" }}
{{- end }}
{{- $jqArch := .chezmoi.arch }}
{{- if eq .chezmoi.arch "386" }}
{{-   $jqArch = "i386" }}
{{- end }}
[".local/bin/jq"]
    type = "file"
    url = "https://github.com/jqlang/jq/releases/download/jq-1.8.1/jq-{{ $jqOS }}-{{ $jqArch }}"
    executable = true
    refreshPeriod = "672h"

# fzf - Fuzzy finder for command-line (Ctrl+R history, Ctrl+T files, Alt+C dirs)
[".local/bin/fzf"]
    type = "archive-file"
    url = "https://github.com/junegunn/fzf/releases/download/v0.66.1/fzf-0.66.1-{{ .chezmoi.os }}_{{ .chezmoi.arch }}.tar.gz"
    executable = true
    refreshPeriod = "672h"
    path = "fzf"

# Rust triple target for zoxide and bat (shared mapping)
{{- $rustTriple := "" }}
{{- if eq .chezmoi.os "linux" }}
{{-   if eq .chezmoi.arch "amd64" }}
{{-     $rustTriple = "x86_64-unknown-linux-musl" }}
{{-   else if eq .chezmoi.arch "arm64" }}
{{-     $rustTriple = "aarch64-unknown-linux-musl" }}
{{-   end }}
{{- else if eq .chezmoi.os "darwin" }}
{{-   if eq .chezmoi.arch "amd64" }}
{{-     $rustTriple = "x86_64-apple-darwin" }}
{{-   else if eq .chezmoi.arch "arm64" }}
{{-     $rustTriple = "aarch64-apple-darwin" }}
{{-   end }}
{{- end }}

# zoxide - Smart cd replacement that learns your habits
[".local/bin/zoxide"]
    type = "archive-file"
    url = "https://github.com/ajeetdsouza/zoxide/releases/download/v0.9.8/zoxide-0.9.8-{{ $rustTriple }}.tar.gz"
    executable = true
    refreshPeriod = "672h"
    path = "zoxide"

# bat - cat with syntax highlighting and git integration
[".local/bin/bat"]
    type = "archive-file"
    url = "https://github.com/sharkdp/bat/releases/download/v0.26.0/bat-v0.26.0-{{ $rustTriple }}.tar.gz"
    executable = true
    refreshPeriod = "672h"
    path = "bat-v0.26.0-{{ $rustTriple }}/bat"

# gitui - Fast terminal UI for git
{{- $gituiTarget := "" }}
{{- if eq .chezmoi.os "linux" }}
{{-   if eq .chezmoi.arch "amd64" }}
{{-     $gituiTarget = "linux-x86_64" }}
{{-   else if eq .chezmoi.arch "arm64" }}
{{-     $gituiTarget = "linux-aarch64" }}
{{-   end }}
{{- else if eq .chezmoi.os "darwin" }}
{{-   if eq .chezmoi.arch "amd64" }}
{{-     $gituiTarget = "mac-x86" }}
{{-   else if eq .chezmoi.arch "arm64" }}
{{-     $gituiTarget = "mac" }}
{{-   end }}
{{- end }}
{{- if ne $gituiTarget "" }}
[".local/bin/gitui"]
    type = "archive-file"
    url = "https://github.com/gitui-org/gitui/releases/download/v0.27.0/gitui-{{ $gituiTarget }}.tar.gz"
    executable = true
    refreshPeriod = "672h"
    path = "./gitui"
{{- end }}

# glow - Beautiful markdown reader for the terminal
{{- $glowOS := .chezmoi.os | title }}
{{- $glowArch := .chezmoi.arch }}
{{- if eq .chezmoi.arch "amd64" }}
{{-   $glowArch = "x86_64" }}
{{- else if eq .chezmoi.arch "arm64" }}
{{-   $glowArch = "arm64" }}
{{- end }}
[".local/bin/glow"]
    type = "archive-file"
    url = "https://github.com/charmbracelet/glow/releases/download/v2.1.1/glow_2.1.1_{{ $glowOS }}_{{ $glowArch }}.tar.gz"
    executable = true
    refreshPeriod = "672h"
    path = "glow_2.1.1_{{ $glowOS }}_{{ $glowArch }}/glow"

# mods - AI on the command line (CLI interface to LLMs)
{{- $modsOS := .chezmoi.os | title }}
{{- $modsArch := .chezmoi.arch }}
{{- if eq .chezmoi.arch "amd64" }}
{{-   $modsArch = "x86_64" }}
{{- end }}
[".local/bin/mods"]
    type = "archive-file"
    url = "https://github.com/charmbracelet/mods/releases/download/v1.8.1/mods_1.8.1_{{ $modsOS }}_{{ $modsArch }}.tar.gz"
    executable = true
    refreshPeriod = "672h"
    path = "mods_1.8.1_{{ $modsOS }}_{{ $modsArch }}/mods"

# gum - Glamorous shell scripts with spinners, progress indicators, and more
{{- $gumOS := .chezmoi.os | title }}
{{- $gumArch := .chezmoi.arch }}
{{- if eq .chezmoi.arch "amd64" }}
{{-   $gumArch = "x86_64" }}
{{- end }}
[".local/bin/gum"]
    type = "archive-file"
    url = "https://github.com/charmbracelet/gum/releases/download/v0.17.0/gum_0.17.0_{{ $gumOS }}_{{ $gumArch }}.tar.gz"
    executable = true
    refreshPeriod = "672h"
    path = "gum_0.17.0_{{ $gumOS }}_{{ $gumArch }}/gum"

# freeze - Generate images of code and terminal output
{{- $freezeOS := .chezmoi.os | title }}
{{- $freezeArch := .chezmoi.arch }}
{{- if eq .chezmoi.arch "amd64" }}
{{-   $freezeArch = "x86_64" }}
{{- end }}
[".local/bin/freeze"]
    type = "archive-file"
    url = "https://github.com/charmbracelet/freeze/releases/download/v0.2.2/freeze_0.2.2_{{ $freezeOS }}_{{ $freezeArch }}.tar.gz"
    executable = true
    refreshPeriod = "672h"
    path = "freeze_0.2.2_{{ $freezeOS }}_{{ $freezeArch }}/freeze"

# taskwarrior-tui - Terminal UI for taskwarrior
# Note: Only x86_64 binaries available (no ARM64 support as of v0.26.3)
# Using v0.26.3 instead of v0.26.4 because v0.26.4 only provides musl binaries on Linux
{{- $tasktuiTarget := "" }}
{{- if eq .chezmoi.os "darwin" }}
{{-   if eq .chezmoi.arch "amd64" }}
{{-     $tasktuiTarget = "x86_64-apple-darwin" }}
{{-   end }}
{{- else if eq .chezmoi.os "linux" }}
{{-   if eq .chezmoi.arch "amd64" }}
{{-     $tasktuiTarget = "x86_64-unknown-linux-gnu" }}
{{-   end }}
{{- end }}
{{- if ne $tasktuiTarget "" }}
[".local/bin/taskwarrior-tui"]
    type = "archive-file"
    url = "https://github.com/kdheepak/taskwarrior-tui/releases/download/v0.26.3/taskwarrior-tui-{{ $tasktuiTarget }}.tar.gz"
    executable = true
    refreshPeriod = "672h"
    path = "taskwarrior-tui"
{{- end }}

# rumdl - Markdown linter written in Rust (markdownlint-compatible, 5x faster)
# Supports stdin/stdout for editor integration and auto-fixing
{{- if or (eq .chezmoi.os "darwin") (eq .chezmoi.os "linux") }}
{{- $rumdlTarget := "" }}
{{- if eq .chezmoi.os "linux" }}
{{-   if eq .chezmoi.arch "amd64" }}
{{-     $rumdlTarget = "x86_64-unknown-linux-gnu" }}
{{-   else if eq .chezmoi.arch "arm64" }}
{{-     $rumdlTarget = "aarch64-unknown-linux-gnu" }}
{{-   end }}
{{- else if eq .chezmoi.os "darwin" }}
{{-   if eq .chezmoi.arch "amd64" }}
{{-     $rumdlTarget = "x86_64-apple-darwin" }}
{{-   else if eq .chezmoi.arch "arm64" }}
{{-     $rumdlTarget = "aarch64-apple-darwin" }}
{{-   end }}
{{- end }}
{{- if ne $rumdlTarget "" }}
[".local/bin/rumdl"]
    type = "archive-file"
    url = "https://github.com/rvben/rumdl/releases/download/v0.0.174/rumdl-v0.0.174-{{ $rumdlTarget }}.tar.gz"
    executable = true
    refreshPeriod = "672h"
    path = "rumdl"
{{- end }}
{{- end }}

# figlet - Create ASCII art text banners in the terminal
{{- if eq .chezmoi.os "darwin" }}
# macOS: Universal binary for both x86_64 and arm64
[".local/bin/figlet"]
    type = "archive"
    url = "https://github.com/gaborcsardi/figlet/releases/download/2.2.5-r3/figlet-macos-2.2.5-r3.tar.gz"
    executable = true
    refreshPeriod = "672h"
    stripComponents = 3
    include = ["**/figlet"]
{{- else if eq .chezmoi.os "linux" }}
{{- $figletArch := "" }}
{{- if eq .chezmoi.arch "amd64" }}
{{-   $figletArch = "x86_64" }}
{{- else if eq .chezmoi.arch "arm64" }}
{{-   $figletArch = "aarch64" }}
{{- end }}
{{- if ne $figletArch "" }}
# Linux: Platform-specific static binary (.apk files are tar.gz format)
[".local/bin/figlet"]
    type = "archive-file"
    url = "https://github.com/gaborcsardi/figlet/releases/download/2.2.5-r3/figlet-2.2.5-r3-{{ $figletArch }}.apk"
    executable = true
    refreshPeriod = "672h"
    path = "usr/local/bin/figlet"
{{- end }}
{{- end }}
