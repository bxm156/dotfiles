[tools]
node = "24"
claude = "latest"
chezmoi = "latest"

[tasks.test]
description = "Test dotfiles in isolated container"
run = "docker compose run --rm dotfiles-test"

[tasks."test:interactive"]
description = "Run tests and open interactive shell (dotfiles installed)"
run = "docker compose run --rm dotfiles-test"

[tasks."test:shell"]
description = "Open shell WITHOUT installing dotfiles (for debugging)"
run = "docker compose run --rm --entrypoint bash dotfiles-test"

[tasks."test:github"]
description = "Test dotfiles by pulling from GitHub (simulates real installation)"
run = "docker compose run --rm dotfiles-test-github"

[tasks."test:github:interactive"]
description = "Run GitHub test and open interactive shell"
run = "docker compose run --rm dotfiles-test-github"

[tasks."test:render"]
description = "Test template rendering and syntax validation"
run = "tests/test-render-simple.sh"

[tasks.clean]
description = "Clean up Docker containers and volumes"
run = "docker compose down --volumes --remove-orphans"

[tasks."clean:full"]
description = "Clean up everything including images and build cache (forces rebuild)"
run = "docker compose down --volumes --remove-orphans --rmi all && docker builder prune -af"
